<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>3.6 Stats | plot_lasagna_gitbook.utf8.md</title>
  <meta name="description" content="">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="3.6 Stats | plot_lasagna_gitbook.utf8.md" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.6 Stats | plot_lasagna_gitbook.utf8.md" />
  
  
  

<meta name="author" content="Juli Tkotz">


<meta name="date" content="2019-04-16">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="3-5-lowering-the-bar.html">
<link rel="next" href="3-7-lets-get-wild.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="1-plot-lasagna.html"><a href="1-plot-lasagna.html"><i class="fa fa-check"></i><b>1</b> Plot Lasagna</a></li>
<li class="chapter" data-level="2" data-path="2-the-tidyverse.html"><a href="2-the-tidyverse.html"><i class="fa fa-check"></i><b>2</b> The tidyverse</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-some-quirks.html"><a href="2-1-some-quirks.html"><i class="fa fa-check"></i><b>2.1</b> Some quirks</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-1-some-quirks.html"><a href="2-1-some-quirks.html#pipes"><i class="fa fa-check"></i><b>2.1.1</b> Pipes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-ggplot2.html"><a href="3-ggplot2.html"><i class="fa fa-check"></i><b>3</b> ggplot2</a><ul>
<li class="chapter" data-level="3.1" data-path="3-1-mapping-aesthetics.html"><a href="3-1-mapping-aesthetics.html"><i class="fa fa-check"></i><b>3.1</b> mapping aesthetics</a></li>
<li class="chapter" data-level="3.2" data-path="3-2-geoms.html"><a href="3-2-geoms.html"><i class="fa fa-check"></i><b>3.2</b> geoms</a></li>
<li class="chapter" data-level="3.3" data-path="3-3-customisation.html"><a href="3-3-customisation.html"><i class="fa fa-check"></i><b>3.3</b> Customisation</a></li>
<li class="chapter" data-level="3.4" data-path="3-4-more-useful.html"><a href="3-4-more-useful.html"><i class="fa fa-check"></i><b>3.4</b> More useful</a></li>
<li class="chapter" data-level="3.5" data-path="3-5-lowering-the-bar.html"><a href="3-5-lowering-the-bar.html"><i class="fa fa-check"></i><b>3.5</b> Lowering the bar</a></li>
<li class="chapter" data-level="3.6" data-path="3-6-stats.html"><a href="3-6-stats.html"><i class="fa fa-check"></i><b>3.6</b> Stats</a></li>
<li class="chapter" data-level="3.7" data-path="3-7-lets-get-wild.html"><a href="3-7-lets-get-wild.html"><i class="fa fa-check"></i><b>3.7</b> Let’s get wild</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stats" class="section level2">
<h2><span class="header-section-number">3.6</span> Stats</h2>
<p>Geoms and stats are (actually interchangeable) siblings. We can either manually set up a <code>data.frame</code> with means, sd and stuff … or use the existing stats to do just that. By default, <code>stat_summary</code> will give us the mean. We specified <code>"bar"</code> (<code>"col"</code> would work as well) as our geom, because <code>stat_summary</code> is by default connected with <code>geom_pointrange</code>. Have a look at this <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">cheat sheet</a> for different geoms and stats.</p>
<pre class="sourceCode r"><code class="sourceCode r">diamonds_small <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price)) <span class="op">+</span>
<span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;light blue&quot;</span>, <span class="dt">geom =</span> <span class="st">&quot;bar&quot;</span>)</code></pre>
<p><img src="plot_lasagna_gitbook_files/figure-html/unnamed-chunk-25-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>That means, we could do it the other way round and use <code>geom_bar</code> while specifying <code>"summary"</code> for <code>stat</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">diamonds_small <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;light blue&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;summary&quot;</span>)</code></pre>
<p><img src="plot_lasagna_gitbook_files/figure-html/unnamed-chunk-26-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>You saw that <code>stats_summary</code> is usually connected to <code>geom_pointrange</code> in a similar fashion, we can produce a bar plot with errorbars:</p>
<pre class="sourceCode r"><code class="sourceCode r">diamonds_small <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;light blue&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;summary&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_errorbar</span>(<span class="dt">stat =</span> <span class="st">&quot;summary&quot;</span>, <span class="dt">width =</span> <span class="fl">.25</span>)</code></pre>
<p><img src="plot_lasagna_gitbook_files/figure-html/unnamed-chunk-27-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>You could very well have your own values for xmin and ymin of your errorbars. You can also specify the functions used to generate the different values. While, for example, <code>stat_summary</code> uses mean and se (<code>mean_se</code>) by default, we can change that to the standard deviation.</p>
<pre class="sourceCode r"><code class="sourceCode r">diamonds_small <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price)) <span class="op">+</span>
<span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun.y =</span> mean,
               <span class="dt">fun.ymax =</span> <span class="cf">function</span>(x) <span class="kw">mean</span>(x) <span class="op">+</span><span class="st"> </span><span class="kw">sd</span>(x),
               <span class="dt">fun.ymin =</span> <span class="cf">function</span>(x) <span class="kw">mean</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">sd</span>(x))</code></pre>
<p><img src="plot_lasagna_gitbook_files/figure-html/unnamed-chunk-28-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can also have a grouped version - something you’d use for an ANOVA or stuff (let’s use the se for this again, though). We need to add another layer to connect the dots with lines. Note that this only works if we group the data using group - only grouping it by colour will cause <code>ggplot</code> to complain. We could use only <code>group</code>, but then the different lines will not be coloured.</p>
<pre class="sourceCode r"><code class="sourceCode r">diamonds_small <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price, <span class="dt">colour =</span> color, <span class="dt">group =</span> color)) <span class="op">+</span>
<span class="st">  </span><span class="kw">stat_summary</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun.y =</span> mean, <span class="dt">geom =</span> <span class="st">&quot;line&quot;</span>)</code></pre>
<p><img src="plot_lasagna_gitbook_files/figure-html/unnamed-chunk-29-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="3-5-lowering-the-bar.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="3-7-lets-get-wild.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": 3,
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": false
});
});
</script>

</body>

</html>
